# 📘 综合实战题：学生信息管理系统（文件持久化版）

## 一、项目背景

学校需要一个**学生信息管理系统**，要求支持：

- 面向对象设计（多类协作）
- 使用 **文本文件** 保存“可读数据”
- 程序重启后数据不丢失（文件持久化）
- 菜单驱动程序（控制台）

------

## 二、功能需求（必须全部完成）

### 1️⃣ 学生类 `Student`

#### 成员变量（建议如下）

```cpp
int id;                // 学号（唯一）
char name[32];         // 姓名（必须用 char 数组，方便二进制读写）
int age;               // 年龄
char gender[8];        // 性别
float score[3];        // 三门课程成绩
```

#### 成员函数

- 构造函数（默认 / 带参）
- 计算平均分
- 显示学生信息
- 提供 **getter / setter**
- ⚠️ 不允许使用 `string` 存成绩数据（为二进制读写做准备）

------

### 2️⃣ 学生管理类 `StudentManager`

该类是整个系统的核心。

#### 成员变量

```cpp
Student* students;     // 动态数组
int size;              // 当前学生数量
int capacity;          // 当前数组容量
string fileText;       // 文本文件名（如 students.txt）
```

------

## 三、必须实现的核心功能

### 🔹 功能 1：菜单系统

```text
====== 学生管理系统 ======
1. 添加学生
2. 显示所有学生
3. 按学号查找学生
4. 按学号删除学生
5. 修改学生信息
6. 从文本文件加载数据
7. 保存到文本文件
0. 退出系统
==========================
```

要求：

- 使用 `switch-case`
- 每个功能独立封装成成员函数

------

### 🔹 功能 2：添加学生（内存操作）

- 判断学号是否重复
- 动态扩容（容量不足时，容量 ×2）
- 使用 **new / delete[]**

------

### 🔹 功能 3：显示学生信息

- 按表格形式输出
- 显示平均分

------

### 🔹 功能 4：文本文件写入（`ofstream`）

#### 要求：

- 使用 `ofstream`
- 每个学生一行
- 数据格式示例：

```text
1001 张三 20 男 89.5 78.0 90.0
```

------

### 🔹 功能 5：文本文件读取（`ifstream`）

#### 要求：

- 从文本文件恢复学生数据
- 覆盖当前内存数据
- 文件不存在时给出提示

------

### 🔹 功能 6：二进制写文件（`ofstream::binary`）

#### 要求：

```cpp
ofstream ofs(fileBin, ios::binary);
ofs.write((const char*)&student, sizeof(Student));
```

- **直接写入 Student 对象**
- 不允许用 string（这是本题重点）

------

### 🔹 功能 7：二进制读文件（`ifstream::binary`）

#### 要求：

```cpp
ifstream ifs(fileBin, ios::binary);
ifs.read((char*)&temp, sizeof(Student));
```

- 逐个读取对象
- 动态扩容存入数组

------

### 🔹 功能 8：析构函数

- 正确释放动态内存
- 程序退出前提示资源释放完成

------

## 四、设计要求（非常重要）

### ✅ 必须满足

- 至少 **2 个类**
- 使用 **构造函数 / 析构函数**
- 使用 **new / delete[]**
- 使用 **ifstream / ofstream**
- 同时使用：
  - 文本读
  - 文本写
- 不允许使用 STL 容器（如 `vector`）

------

## 五、加分（可选，但强烈建议）

任选 2～3 个即可让代码 **轻松突破 300 行**

### ⭐ 加分点 1：排序功能

- 按平均分排序
- 按学号排序

### ⭐ 加分点 2：继承

- `Person` 基类
- `Student : public Person`

### ⭐ 加分点 3：异常处理

- 文件打开失败抛异常
- 输入非法数据处理

------

